#ifndef GNSS_HEADER
#define GNSS_HEADER

#include <stdint.h>

#define TREKPOINTS_ON_DISPLAY	(8)

#define TREKPOINTS_TOTAL (255)
//~20m gap
static const float latitude_array []={0.990923336456841,0.990919985424677,0.990916267873370,0.990913248453764,0.990908326625274,0.990903561876416,0.990900525003517,0.990897802289884,0.990895358828931,0.990893491326632,0.990894014925407,0.990896196586972,0.990899111286823,0.990900734443028,0.990901991080089,0.990902567038742,0.990902881198007,0.990904609073967,0.990904486900919,0.990907488867233,0.990910508286839,0.990911730017315,0.990911904550240,0.990911258778417,0.990905499191886,0.990899599979014,0.990893438966754,0.990887469940712,0.990881832527228,0.990876177660452,0.990871151112206,0.990866089657375,0.990860190444504,0.990855355882476,0.990851167092271,0.990846978302066,0.990842265913086,0.990838478548609,0.990833923239261,0.990829315570036,0.990824254115205,0.990817970929898,0.990811460851788,0.990806399396957,0.990801547381637,0.990796154314248,0.990790255101376,0.990784617687892,0.990779346793551,0.990773377767510,0.990768037059998,0.990765733225386,0.990764563854787,0.990762382193222,0.990759450040078,0.990755994288160,0.990752259283560,0.990746307710811,0.990740303778184,0.990735713562251,0.990731838931312,0.990728156286590,0.990724665628086,0.990723670790413,0.990723984949678,0.990723618430535,0.990722675952739,0.990721314595922,0.990718469709242,0.990714280919037,0.990709097291159,0.990700806977212,0.990695623349333,0.990690736427427,0.990687717007822,0.990682620646406,0.990676162928173,0.990669303784213,0.990662060667817,0.990655637856170,0.990649756096591,0.990644607375297,0.990640104425827,0.990634344839296,0.990629545183853,0.990624396462559,0.990617764211402,0.990610695627931,0.990602841646297,0.990598268883657,0.990596558460990,0.990594987664663,0.990593120162363,0.990589454970934,0.990584917114879,0.990580065099559,0.990576661707517,0.990573572474741,0.990568894992346,0.990564112790195,0.990558562643174,0.990553989880534,0.990550132702887,0.990547427442546,0.990546868937186,0.990547601975471,0.990542994306246,0.990537269626300,0.990531475133183,0.990526274052012,0.990521963088760,0.990517111073439,0.990511473659955,0.990504893768675,0.990498610583368,0.990491454733435,0.990484613042767,0.990478312404167,0.990473076416411,0.990467055030492,0.990460091166777,0.990455850016694,0.990453982514394,0.990451451786979,0.990448868699686,0.990447210636897,0.990445779466910,0.990444470469971,0.990444505376556,0.990444889348992,0.990443667618515,0.990443545445468,0.990444418110094,0.990446163439346,0.990444941708869,0.990445465307645,0.990446215799223,0.990445587480692,0.990445988906420,0.990447332809944,0.990447996035060,0.990449043232611,0.990449514471509,0.990449793724190,0.990449601737972,0.990447699329087,0.990447821502135,0.990451015454666,0.990456897214245,0.990463058226505,0.990470894754846,0.990477788805392,0.990485223908005,0.990492275038183,0.990499134182144,0.990506028232689,0.990511752912635,0.990518193177575,0.990524738162270,0.990531719479278,0.990537671052028,0.990544983981594,0.990552942682983,0.990559732013773,0.990566591157733,0.990573310675353,0.990579995286389,0.990587098776444,0.990593765934187,0.990600066572786,0.990605634173100,0.990611271586584,0.990617292972504,0.990623837957199,0.990630260768846,0.990636875566711,0.990642041741297,0.990648010767339,0.990651815585108,0.990657784611150,0.990663422024634,0.990668431119587,0.990673143508567,0.990679740853140,0.990681311649467,0.990680246998623,0.990681032396787,0.990680700784229,0.990680910223739,0.990680962583616,0.990680438984841,0.990680770597399,0.990681206929712,0.990680945130324,0.990680788050691,0.990680596064473,0.990680212092038,0.990680159732160,0.990679688493262,0.990681835248242,0.990688991098176,0.990695658255918,0.990701540015497,0.990708276986410,0.990714420545377,0.990720616464222,0.990727196355502,0.990733305007884,0.990739675459653,0.990747005842512,0.990752433816485,0.990756343354010,0.990761945860909,0.990764459135032,0.990766204464284,0.990767251661835,0.990772452743006,0.990775908494925,0.990779573686354,0.990784966753743,0.990790464540886,0.990796485926806,0.990802821471991,0.990808895217788,0.990815248216265,0.990821531401572,0.990827692413832,0.990834289758404,0.990838897427629,0.990844569747698,0.990848688724733,0.990854622844190,0.990860452243892,0.990866403816641,0.990873559666574,0.990880663156630,0.990886771809012,0.990893578593094,0.990900699536442,0.990908064825886,0.990910892259274,0.990910735179641,0.990909687982090,0.990907977559423,0.990904137835069,0.990903230263858,0.990902270332769,0.990901834000456,0.990899896684987,0.990897767383299,0.990894363991258,0.990893700766142,0.990896022054047,0.990898587688048,0.990902043439966};

static const float longitude_array[]={1.058437471579423,1.058443440605465,1.058449461991384,1.058458537703495,1.058462953386502,1.058465711006721,1.058475990996015,1.058486131358969,1.058496324081801,1.058506359725000,1.058517320392702,1.058526832437126,1.058538316703604,1.058546432484625,1.058556328501484,1.058565753279445,1.058575614389719,1.058585824565843,1.058596471074280,1.058605599146268,1.058617065959454,1.058628759665442,1.058641326036056,1.058653019742045,1.058653508434235,1.058652286703759,1.058652583409732,1.058652531049854,1.058648534245867,1.058644694521513,1.058639545800219,1.058635269743552,1.058631901258096,1.058624885034503,1.058617851357617,1.058609648310133,1.058602579726662,1.058594603571980,1.058586295804741,1.058582246640876,1.058581426336128,1.058579942806264,1.058584829728169,1.058587657161558,1.058591374712864,1.058596732873668,1.058601584888988,1.058604901014567,1.058613976726678,1.058620504258080,1.058622703372937,1.058612528103398,1.058601707062036,1.058590938380551,1.058580204605651,1.058570064242697,1.058559958786328,1.058555071864423,1.058548945758748,1.058539695513713,1.058528141434064,1.058517023686729,1.058506289911829,1.058494247139991,1.058482972313023,1.058470161596313,1.058458014104719,1.058445709533493,1.058435255011273,1.058430542622293,1.058429827037300,1.058427174136837,1.058429565237912,1.058439182002090,1.058449043112364,1.058457193799971,1.058462202894924,1.058460806631522,1.058456757467658,1.058450596455398,1.058447472316037,1.058445622267030,1.058440124479886,1.058435063025056,1.058426964697326,1.058418936182767,1.058413420942331,1.058409057619201,1.058403228219499,1.058391447247048,1.058380312046421,1.058367431516541,1.058356086876403,1.058345230928455,1.058335491991229,1.058325107282180,1.058316572622138,1.058305035995782,1.058295366871726,1.058285401041697,1.058276080983491,1.058280741012594,1.058288996419956,1.058299503302053,1.058311144648164,1.058321529357213,1.058329173899337,1.058337726012672,1.058344846956020,1.058351339580837,1.058359333188811,1.058365913080092,1.058371812292963,1.058377641692665,1.058377571879495,1.058376856294502,1.058376297789141,1.058377397346570,1.058380538939223,1.058383244199564,1.058385774926979,1.058394274680436,1.058405182988261,1.058415253538046,1.058426964697326,1.058439949946961,1.058453005009766,1.058464698715754,1.058477788685144,1.058490826294657,1.058503654464659,1.058515889222716,1.058522783273261,1.058530933960868,1.058540480911876,1.058552628403470,1.058565700919567,1.058579279581148,1.058592072844565,1.058605197720540,1.058618462222855,1.058631604552123,1.058644205829322,1.058656510400549,1.058668605532265,1.058680124705328,1.058694244418977,1.058702290386828,1.058704506954979,1.058707351841659,1.058709742942734,1.058712011870762,1.058714420425130,1.058718417229117,1.058719464426668,1.058721035222995,1.058721663541526,1.058723269244437,1.058725852331730,1.058728033993295,1.058731385025459,1.058731123226071,1.058730774160221,1.058729674602792,1.058726672636479,1.058726620276601,1.058729255723772,1.058731210492534,1.058734474258235,1.058738628141855,1.058745644365448,1.058751194512469,1.058752468602823,1.058755610195477,1.058759048494103,1.058757390431314,1.058756168700838,1.058755208769749,1.058752904935136,1.058749239743707,1.058743078731448,1.058735259656399,1.058728976471091,1.058724176815648,1.058712849628803,1.058702621999386,1.058692324556800,1.058681765314825,1.058669635276524,1.058658168463338,1.058648970578180,1.058639894866070,1.058631168219810,1.058622703372937,1.058612754996201,1.058603923630186,1.058594324319300,1.058582473533679,1.058569942069650,1.058560552198274,1.058560377665349,1.058559696986941,1.058559208294750,1.058559068668410,1.058558684695974,1.058558684695974,1.058558283270246,1.058557497872083,1.058557288432573,1.058557236072695,1.058562384793988,1.058571687398902,1.058581059816985,1.058592840789436,1.058605110454077,1.058618776382120,1.058619457060529,1.058615879135562,1.058611480905847,1.058605162813955,1.058601323089601,1.058595336610266,1.058589175598007,1.058585562766455,1.058580204605651,1.058580361685284,1.058581286709788,1.058587395362170,1.058596680513790,1.058604988281030,1.058614744671548,1.058624012369876,1.058631342752735,1.058634571611851,1.058640854797158,1.058645898798697,1.058651483852303,1.058652583409732,1.058652199437296,1.058651798011568,1.058644432722125,1.058631203126395,1.058620382085032,1.058610084642446,1.058599089068158,1.058587185922659,1.058574828991555,1.058561267783267,1.058548247627047,1.058534913311562,1.058521910608635,1.058509291878143,1.058496638241066,1.058484455842887,1.058473390455429};

struct trekpoints_struct
{
//RELATIVE COORDINATES
    uint32_t distance;

    int16_t azimuth_deg_signed;
    double azimuth_rad;
    double azimuth_relative_rad;
};

struct trekpoints_struct **get_trekpoints(void);

typedef enum {
	GPS_BAUDRATE_9600 = 0,
	GPS_BAUDRATE_19200,
    GPS_BAUDRATE_38400,
	GPS_BAUDRATE_57600,
	GPS_BAUDRATE_115200,
	GPS_BAUDRATE_230400,
	BAUDRATE_MAX_IND = GPS_BAUDRATE_230400
} gpsBaudRate_e;

void init_gnss(void);

void find_nearest_trekpoint(void);

void manage_trekpoints(uint8_t range_ind);

#endif /*GNSS_HEADER*/
