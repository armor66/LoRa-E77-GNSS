- по умолчанию Spreading Factor 11, Coding Rate 4/6. можно выбрать одно из трех, четырех или пяти устройств. период 
обновления даных со всех устройств будет соответственно 3, 4 или 5 секунд.
- если выбрать Spreading Factor 12, Coding Rate останется 4/6, номер устройства 3 из трех. оно будет работать 
только на прием с одним или двумя маяками если на них также выбран Spreading Factor 12 и их номера 1 или 2. 
(при SF12 маяки издают двойной короткий сигнал если их номер больше двух) период обновления 3 секунды.
 в меню Actions появится выбор, на какой маяк подавать звуковой сигнал. передача с устройства 3 идет только при 
выборе "Beeper1 on" или "Beeper2 on" во время передачи данных другим маяком. при Spreading Factor 12 прием и 
передача идут с инвертированием IQ и не мешают друг другу (если маяки не расположены слишком близко друг к другу).
на контакт BUZZ_IN разъема SWD маяка можно подать сигнал BUZZ(активный GND) с внешнего устройства(полетного контроллера).
при подаче питания на разъем SWD маяк автоматически включается и подзаряжается его аккумулятор.

-синий светодиод - фронт PPS или начало цикла если нет PPS, гаснет через 50мс;
-зеленый светодиод - фронт PPS + 50мс, гаснет в конце приема GNSS данных (UBLOX PVT) или через 50мс;
-красный светодиод - индикация передачи, окончания приема и начала цикла совместно с синим;
-желтый светодиод горит во время зарядки.

-включение с зажатой кнопкой ESC/DOWN - настройка GNSS модуля,
одновременно зажатые кнопки OK/UP и ESC/DOWN (в меню не отображается) сбрасывают GNSS модуль до заводских установок
 
-включение с зажатой кнопкой OK/UP - сканирование каналов с шагом 5 для обнаружения помех или 
других работающих устройств

-включение с зажатыми кнопками OK/UP и ESC/DOWN - для проверки работоспособности гироскопа (дать полежать неподвижно),
акселерометра (дождаться появления данных и подержать последовательно в шести разных положениях) и магнетометра.
калибровочные значения сохраняются, но периодически приходится покрутить устройство чтобы показания компаса были корректны
(появляется предупреждение "Turn Around"), при скорости больше GPS_SPEED_THRS(2км/ч) курс берется с GNSS модуля.

кнопка PWR(short):
-отключение подсветки. если подсветка выключена:
	-кнопка UP(short) количеством нажатий выбирается группа 1...5 для сохранения текущих координат, затем 
	кнопка OK(long):
		2 коротких сигнала - координаты недостоверны;
		количество длинных сигналов подтверждает номер выбранной группы;
		один короткий - запись в выбранную группу;
		1 длинный сигнал без коротких - группа заполнена, следует выбрать следующую;
		2 коротких сигнала - превышен номер группы.
	-кнопка DOWN(short) количеством нажатий выбирается группа 1...6 для удаления всех координат в группе, 
		7 - для очистки координат всех пяти сохраненных устройств (7 длинных сигналов подтверждения)
		затем кнопка ESC(long):
		количество длинных сигналов подтверждает номер выбранной группы;
		2 коротких сигнала - превышен номер группы.
Успешная запись или стирание делают текущим меню Points с подсветкой выбранной группы
Перед очисткой конкретной группы удобно зайти в меню Points, где в левой колонке показано необходимое количество 
коротких нажатий для стирания точек соответствующей группы. (Стирание всех точек в меню Actions)

кнопка PWR(long):
-включение (удерживать до мигания белого светодиода);
-вызов меню Actions -> Power OFF;
-в меню Actions повторное удержание PWR(long) устанавливает флаг EMERGENCY;
-включение подсветки (если текущее меню Navigations и установлен "FlwTrek on", повторный поиск ближайшей точки 
записанного трека одновременно с включением подсветки).

меню Main:

если GPS не сконфигурирован (выделено ORANGE, издается двойной короткий сигнал), выключить и вoйти в меню конфигурации GNSS
при недостоверных GNSS данных(fix valid не установлен), строка 3DFix и pDop отображается цветом CYAN
OnTheAir показывает количество активных(fix valid) устройств, включая своё
кнопка UP(short), кнопка DOWN(short) - навигация вверх/вниз;
кнопка OK(long) - вход в соответствующее подменю;
кнопка ESC(long) - изменение яркости подсветки средняя(после включения)/низкая/высокая и т.д.

меню Navigation:

-отображение относительного положения других устройств, навигация по сохраненному треку
кнопка UP(short), кнопка DOWN(short) - цикличное изменение масштаба от 30м до 1920м
кнопка OK(long) - вход в экраны отдельно каждого устройства или маячка, отображающие положение устройств(маячков)
		 и 1 или 7(если скорость сохраненого устройства была больше GPS_SPEED_THRS(3км/ч)) последних 
		 сохраненных координат. Координаты сохраняются если они перестали поступать по истечении 
		 установленного TimeOut в меню SETTINGS (если TimeOut не "0"). Если сигнал принимаемого устройства 
		 содержит метку маяка, TimeOut всегда 30 секунд;
кнопка OK(long) - цикличное переключение между другими устройствами;
кнопка ESC(long) - возврат в предыдущее меню Navigation/Main;

меню Devices:

-подробное состояние устройств
кнопка UP(short), кнопка DOWN(short) - цикличное переключение между всеми устройствами;
кнопка OK(long) - сохранение (если принят соответствующий valid_fix_flag) до 7 координат устройств в каждую
		 из групп 0...6	(через дробь - количество уже сохраненных позиций в группе):
	-кнопка UP(short), кнопка DOWN(short) - выбор группы;
	-кнопка OK(long) - вход, кнопка ESC(long) - выход без сохранения;
		-кнопка UP(short), кнопка DOWN(short) - выбор позиции 
		 (красная означает, что она занята и будет перезаписана);
		-кнопка OK(long) - сохранение;
	-кнопка ESC(long) - возврат в предыдущее меню Devices/Main.

меню Nav2points:

-отображение относительного положения сохраненных точек по группам 0...6
кнопка UP(short), кнопка DOWN(short) - изменение масштаба от 30м до 1920м;
кнопка OK(long) - последовательный перебор групп;
кнопка ESC(long) - возврат в предыдущее меню Main;

меню Points:

 №        - номер группы для сохраненных координат точек или устройств;
 POINTS   - имя группы или устройства;
 SAVED    - количество сохраненных точек в данной группе или устройстве;
 i "-1"   - в группе нет сохраненных точек, в устройствах отображаются последние принятые координаты
							(не сохраняются если TimeOut не установлен);
 i "0-31" - индекс последней сохраненной или очищенной(занятой) записи во флэш памяти;

	Запись производится группами по 7 точек (9 байт каждая + 1 байт - флаг группы или устройства)
	по 32 записи(индекса) размером 64 байта на каждой странице флэш памяти размером 2048 байт,
	при переполнении вся страница групп точек или устройств очищается.

группа Alarms - для отслеживания сигналов Emergency, (Alarm и Gather не используется), приходящих с других устройств;
группа BcnMan - для ручного сохранения текущих координат маячка;
-отображается количества сохраненных точек в каждой группе:
	-кнопка OK(long) - вход в подменю с показом сохраненных координат;
	-ещё раз OK(long) - предложение очистить все сохраненные координаты в группе;
	-кнопка ESC(long) - возврат в предыдущее меню Points;
-кнопка ESC(long):
	если нет сохраненных точек, возврат в меню Main;
	если есть сохраненные точки в выбранной группе 0...6, переход на соответствующий экран группы в Nav2points;
	если есть сохраненные точки в выбранной группе устройств 1...5, переход на соответствующий экран
		 устройства или маячка в подменю Navigation.

меню Settings:(изменение параметров устройства)

кнопка UP(short), кнопка DOWN(short) - навигация вверх/вниз
кнопка OK(long) - вход в подменю:
	кнопка UP(short), кнопка DOWN(short) - изменить значение;
	кнопка ESC(long) - выход без сохранения;
	кнопка OK(long) - сохранить значение;
кнопка ESC(long) - если изменений не было, выход в меню Main.
	Для применения параметров радиоканала требуется перезагрузка
	Если были сохранены изменения необходимо либо их подтвердить OK(long) либо вызвать перезагрузку ESC(long)
		с возвратом предыдущих значений;
	TimeOut - если не равен 0, это устройство отслеживает другие, координаты других устройств сохраняются если они 
		перестали поступать по истечении установленного времени и издаются 3 коротких сигнала.
	Если сигнал принимаемого устройства содержит метку маяка, TimeOut всегда 30 секунд.
подменю Fence пока не используется (только как MUTE). Если и в TimeOut и в Fence выставлено "0", отключается BUZZER.

меню Actions:(можно войти по удержанию PWR(long) из любого меню)

удержание PWR(long) устанавливает флаг EMERGENCY
кнопка OK(long) в положении Power OFF выключает питание;
кнопка OK(long) - цикличное переключение off/on,
		- "Del points" стирание всех сохраненных точек;
		- "SetDefault(s)" возврат к значениям по умолчанию.
-флаги Emergency (Alarm и Gather не задействованы) и Beeper передаются на другие устройства
-на устройстве принявшем флаг EMERGENCY:
	-текущим меню становится Nav2points->Alarms;
	-периодически включается подсветка экрана, при нажатии на любую кнопку подсветка постоянна и не блокируется;
	(не задействовано -количество коротких сигналов соответствует номеру устройства, установившего флаг)
	-в меню Main отображается, какое устройство передает флаг Emergency;
-флаг Beeper вызывает длинный сигнал на других устройствах во время приемного слота передающего его устройства;
-флаг FlwTrek по умолчанию включен, если в прошивке залит трек (TREKPOINTS_TOTAL > 1), иначе отключен;
кнопка ESC(long) - выход в меню Main;

Скрипт gnss.sh берет координаты из обычного *.gps файла и сохраняет их в gnss.h
(gnss.h из Core/Inc должен находиться в том же каталоге, что и gnss.sh)
Координаты необходимо проредить командами после строки "#remove the even numbered lines from the file"
чтобы #define TREKPOINTS_TOTAL в файле gnss.h получился не более 255 (или обрезать вручную)
*.gps файл выбирается как параметр при запуске gnss.sh или интерактивно. Если файл не выбран, содержимое 
latitude_array и longitude_array в gnss.h обнуляется и FlwTrek в меню Actions становится неактивным.
